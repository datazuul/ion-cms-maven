# create tables

CREATE TABLE CATEGORIES(ID VARCHAR(250) NOT NULL PRIMARY KEY,METADATA BLOB);
CREATE TABLE CATEGORIES_PUBLICATIONS(CATEGORY_ID VARCHAR(250) NOT NULL,PUBLICATION_ID VARCHAR(250) NOT NULL, PRIMARY KEY(CATEGORY_ID,PUBLICATION_ID));
CREATE TABLE GROUPS(ID VARCHAR(250) NOT NULL PRIMARY KEY,METADATA BLOB);
CREATE TABLE PUBLICATIONS(ID VARCHAR(250) NOT NULL PRIMARY KEY,WORKFLOW_TYPE VARCHAR(250),TYPE_ID VARCHAR(250),DATEPUBLI VARCHAR(250),METADATA BLOB);
CREATE TABLE SECTIONS(ID VARCHAR(250) NOT NULL PRIMARY KEY,PARENT_ID VARCHAR(250),NUMINDEX INTEGER,METADATA BLOB);
CREATE TABLE SECTIONS_PUBLICATIONS(SECTION_ID VARCHAR(250) NOT NULL,PUBLICATION_ID VARCHAR(250) NOT NULL, PRIMARY KEY(SECTION_ID,PUBLICATION_ID));
CREATE TABLE TYPE_PUBLICATIONS(ID VARCHAR(250) NOT NULL PRIMARY KEY,METADATA BLOB);
CREATE TABLE USERS(LOGIN VARCHAR(250) NOT NULL PRIMARY KEY,PASSWORD VARCHAR(250),METADATA BLOB);
CREATE TABLE USERS_GROUPS(LOGIN VARCHAR(250) NOT NULL,GROUP_ID VARCHAR(250) NOT NULL, PRIMARY KEY(LOGIN,GROUP_ID));
CREATE TABLE VERSIONS_PUBLICATIONS(ID VARCHAR(250) NOT NULL PRIMARY KEY,AUTHOR_ID VARCHAR(250),WORKFLOW_ID INTEGER,PUBLICATION_ID VARCHAR(250),VERSION INTEGER,DATA BLOB);

# insert default users

INSERT INTO USERS_GROUPS VALUES('admin','admins');
INSERT INTO USERS_GROUPS VALUES('admin','webmasters');
INSERT INTO USERS_GROUPS VALUES('admin','users');
INSERT INTO USERS_GROUPS VALUES('user','users');
INSERT INTO USERS_GROUPS VALUES('visiteurAnonyme','visitors');
INSERT INTO USERS_GROUPS VALUES('webmaster','webmasters');
INSERT INTO USERS_GROUPS VALUES('webmaster','users');
INSERT INTO GROUPS VALUES('admins',NULL);
INSERT INTO GROUPS VALUES('visitors',NULL);
INSERT INTO GROUPS VALUES('webmasters',NULL);
INSERT INTO GROUPS VALUES('users',NULL);
INSERT INTO USERS VALUES('admin','admin',NULL);
INSERT INTO USERS VALUES('user','user',NULL);
INSERT INTO USERS VALUES('visiteurAnonyme','',NULL);
INSERT INTO USERS VALUES('webmaster','webmaster',NULL);
